{% load static %}
<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- 요기에 구글 머티리얼 아이콘 -->
  <link
    href="https://fonts.googleapis.com/css?family=Material+Icons|Material+Icons+Outlined|Material+Icons+Two+Tone|Material+Icons+Round|Material+Icons+Sharp"
    rel="stylesheet">

  <!-- jquery 사용하기 위해 -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  <title>Bootstrap demo</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
  <link rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />

  <style>
    .box {
      width: 50px;
      height: 50px;
      border-radius: 70%;
      overflow: hidden;
    }

    .profile {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .imgbox {
      width: 700px;
      height: 400px;
      overflow: hidden;
    }

    .imgfit {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    input:focus {
      outlined: none;
      border: none
    }

    .feed_box {
      margin: 0 0 30px 0;
    }

    .modal_overlay {
      width: 100%;
      height: 100%;
      position: absolute;
      left: 0;
      top: 0;
      display: none;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      background: rgba(0, 0, 0, 0.8);
      backdrop-filter: blur(1.5px);
      -webkit-backdrop-filter: blur(1.5px);
    }

    .modal_window {
      background: white;
      backdrop-filter: blur(13.5px);
      -webkit-backdrop-filter: blur(13.5px);
      border-radius: 10px;
      border: 1px solid rgba(255, 255, 255, 0.18);
      width: 800px;
      height: 600px;
      position: relative;
      padding: 10px;
    }

    .modal_title {
      display: flex;
      flex-direction: row;
      justify-content: space-between;
      font-weight: bold;
      font-size: 20px;
    }

    .modal_title_side {
      flex: 0 0 40px;
      text-align: center;
    }

    .modal_image_upload {

      /*
        outline: 2px dashed black;
        outline-offset: -10px;
        */
      text-align: center;
      transition: all .15s ease-in-out;
      width: 780px;
      height: 548px;
    }

    .image_load_space {
      outline: 2px dashed black;
      outline-offset: -10px;
      text-align: center;
      transition: all .15s ease-in-out;
      width: 500px;
      height: 548px;
    }
  </style>
</head>

<body>


  <!--How to get and view data from Content.view-->
  <!--
  <div>
    {% for feed in feeds %}
    <p>{{ feed.content }}</p>
    <p>{{ feed.user_id }}</p>
    <p>{{ feed.like_count }}</p>

    {% endfor %}

  </div>
-->

  <nav class="navbar navbar-expand-lg navbar-light bg-light" style="position: fixed; width: 100%">
    <div class="container" style="justify-content: space-between; flex-wrap: nowrap; min-width: 100px">
      <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <a class="navbar-brand" href="#">
          <img style="width: 100px" src="{% static 'icons/Instagram_logo.png' %}">
        </a>
        <div class="flex-grow-1 justify-content-center">
          <form class="navbar-brand abs" role="search">
            <input class="form-control" type="search" placeholder="Search" aria-label="Search"
              style="width: 400px; margin: auto;">
          </form>
        </div>
        <div class="navbar-nav ms-auto">
          <span class="material-icons">
            home
          </span>
          <span class="material-symbols-outlined">send</span>
          <span class="material-symbols-outlined" style="cursor: pointer;" id="nav_bar_add_box">add_box</span>
          <span class="material-symbols-outlined">explore</span>
          <span class="material-symbols-outlined">favorite_border</span>
        </div>
      </div>
    </div>
  </nav>

  <div
    style="display: flex; flex-direction: row; text-align: center; justify-content: center; padding-top: 65px;background: #FAFAFA">
    <div style="min-width: 700px;margin-right: 400px">


      <!--FeedBox Start-->
      {% for feed in feeds %}
      <div class="feed_box">
        <div style="border: solid 1px #ced4da; background-color: white;">
          <div style="display: flex; flex-direction: row; align-items: center; margin: 0 20px">
            <div class="box" style="background: #bdbdbd">
              <img class="profile" src="{{ feed.profile_image }}" alt="">
            </div>
            <div>
              {{ feed.user_id }}
            </div>
          </div>
          <div class="imgbox">
            <img class="imgfit" src="{{ feed.image }}">
          </div>
          <div style="margin: 0 20px; display: flex; flex-direction: row; justify-content: space-between">
            <div>
              <span class="material-symbols-outlined">favorite</span>
              <span class="material-symbols-outlined">mode_comment</span>
              <span class="material-symbols-outlined">send</span>
            </div>
            <div>
              <span class="material-symbols-outlined">bookmark</span>
            </div>
          </div>
          <div style=" margin: 0 20px; text-align: left; font-size: 14px">춘식이 <b> 위 {{ fedd.like_count }}명</b>이 좋아합니다
          </div>
          <div style=" margin: 0 20px; text-align: left; font-size: 16px"><b>{{ feed.user_id }}</b> {{ feed.content }}
          </div>
          <div style=" margin: 0 20px; text-align: left; font-size: 14px"><b>aaaa</b> 나도 재주도 가고 십다</div>
          <div style=" margin: 0 20px; text-align: left; font-size: 14px"><b>bbbb</b> 재주도에 외국인 관광객이 없어서 놀러가기 좋다던데..
          </div>
          <div style="border-top: solid 1px #ced4da;">
            <input type="text" class="form-control" style="box-shadow: none;border: none" placeholder="댓글 달기..">
          </div>
        </div>
      </div>
      {% endfor %}
      <!--FeedBox End-->


    </div>

    <div style="width: 400px; height: 1000px; position: fixed; left: 62%">
      <div style="display: flex; flex-direction: row; align-items: center; margin: 0 20px">
        <div class="box" style="width: 70px; height: 70px">
          <img class="profile"
            src="http://file3.instiz.net/data/file3/2021/05/31/e/b/8/eb8d9ad2d779ca2a0b7acc2b67694a23.png" alt="">
        </div>
        <div style="margin-left: 10px; text-align: left">
          <div style="font-weight: bold">
            jin.99
          </div>
          <div style=" color: gray">
            Kyujin Moon
          </div>
        </div>
      </div>
      <div style="display: flex; flex-direction:row; justify-content: space-between; margin: 10px">
        <div style="font-weight:bold; color: gray">회원님을 위한 추천</div>
        <div><a href="#" style="text-decoration:none; color: black; font-weight:bold">모드 보기</a></div>
      </div>
      <div style="display: flex; flex-direction: row; justify-content: space-between; margin: 0 10px">
        <div style="display: flex; flex-direction: row;">
          <div class="box" style="width: 35px; height: 35px">
            <img class="profile"
              src="http://file3.instiz.net/data/file3/2021/05/31/e/b/8/eb8d9ad2d779ca2a0b7acc2b67694a23.png" alt="">
          </div>
          <div style="margin-left: 10px; text-align: left">
            <div style="font-weight: bold; font-size: 14px;">
              aaaaaaaaaa
            </div>
            <div style=" color: gray; font-size: 14px;">
              나랑 갇이 치킨 먹음
            </div>
          </div>
        </div>
        <div>
          <a href="#" style="font-size: 14px; text-decoration:none; font-weight:bold">팔로우</a>
        </div>
      </div>
      <div style="display: flex; flex-direction: row; justify-content: space-between; margin: 0 10px">
        <div style="display: flex; flex-direction: row;">
          <div class="box" style="width: 35px; height: 35px">
            <img class="profile"
              src="http://file3.instiz.net/data/file3/2021/05/31/e/b/8/eb8d9ad2d779ca2a0b7acc2b67694a23.png" alt="">
          </div>
          <div style="margin-left: 10px; text-align: left">
            <div style="font-weight: bold; font-size: 14px;">
              aaaaaaaaaa
            </div>
            <div style=" color: gray; font-size: 14px;">
              나랑 갇이 치킨 먹음
            </div>
          </div>
        </div>
        <div>
          <a href="#" style="font-size: 14px; text-decoration:none; font-weight:bold">팔로우</a>
        </div>
      </div>

      <div style="display: flex; flex-direction: row; justify-content: space-between; margin: 0 10px">
        <div style="display: flex; flex-direction: row;">
          <div class="box" style="width: 35px; height: 35px">
            <img class="profile"
              src="http://file3.instiz.net/data/file3/2021/05/31/e/b/8/eb8d9ad2d779ca2a0b7acc2b67694a23.png" alt="">
          </div>
          <div style="margin-left: 10px; text-align: left">
            <div style="font-weight: bold; font-size: 14px;">
              aaaaaaaaaa
            </div>
            <div style=" color: gray; font-size: 14px;">
              나랑 갇이 치킨 먹음
            </div>
          </div>
        </div>
        <div>
          <a href="#" style="font-size: 14px; text-decoration:none; font-weight:bold">팔로우</a>
        </div>
      </div>

      <div style="display: flex; flex-direction: row; justify-content: space-between; margin: 0 10px">
        <div style="display: flex; flex-direction: row;">
          <div class="box" style="width: 35px; height: 35px">
            <img class="profile"
              src="http://file3.instiz.net/data/file3/2021/05/31/e/b/8/eb8d9ad2d779ca2a0b7acc2b67694a23.png" alt="">
          </div>
          <div style="margin-left: 10px; text-align: left">
            <div style="font-weight: bold; font-size: 14px;">
              aaaaaaaaaa
            </div>
            <div style=" color: gray; font-size: 14px;">
              나랑 갇이 치킨 먹음
            </div>
          </div>
        </div>
        <div>
          <a href="#" style="font-size: 14px; text-decoration:none; font-weight:bold">팔로우</a>
        </div>
      </div>

      <div style="display: flex; flex-direction: row; justify-content: space-between; margin: 0 10px">
        <div style="display: flex; flex-direction: row;">
          <div class="box" style="width: 35px; height: 35px">
            <img class="profile"
              src="http://file3.instiz.net/data/file3/2021/05/31/e/b/8/eb8d9ad2d779ca2a0b7acc2b67694a23.png" alt="">
          </div>
          <div style="margin-left: 10px; text-align: left">
            <div style="font-weight: bold; font-size: 14px;">
              aaaaaaaaaa
            </div>
            <div style=" color: gray; font-size: 14px;">
              나랑 갇이 치킨 먹음
            </div>
          </div>
        </div>
        <div>
          <a href="#" style="font-size: 14px; text-decoration:none; font-weight:bold">팔로우</a>
        </div>
      </div>
      <div style=" margin-top: 40px; font-size: 12px; color: gray; text-align: left">소개 도운말 홍부센터 API <br> 개인정보처리뱡침 약관 위치
        인기 계정 해시태그 언어 </div>
      <div style=" margin-top: 20px; font-size: 12px; color: gray; text-align: left"> 2021 인스타그램 프롬 패이스북 </div>

    </div>

  </div>
  </div>


  <div id="first_modal" class="modal_overlay">
    <div class="modal_window">
      <div class="modal_title">
        <div class="modal_title_side"></div>
        <div> 새 게시물 </div>
        <div class="modal_title_side">
          <span id="close_modal" class="material-icons-outlined" style="cursor: pointer;">
            close
          </span>
        </div>
      </div>
      <div class="modal_image_upload" style="border-top: solid 1px gray;">

      </div>
    </div>
  </div>

  <div id="second_modal" class="modal_overlay">
    <div class="modal_window">
      <div class="modal_title">
        <div class="modal_title_side"></div>
        <div> 새 게시물 </div>
        <div class="modal_title_side">
          <span id="second_close_modal" class="material-icons-outlined" style="cursor: pointer;">
            close
          </span>
        </div>
      </div>
      <div style="border-top: solid 1px gray; display: flex; flex-direction: row; margin-top: 10px">
        <div class="image_load_space">

        </div>
        <div style="border-left: solid 1px gray">
          <div>
            <textarea class="form-control" rows="5" style="width: 276px; height: 400px"></textarea>
          </div>
          <button type="button" class="btn btn-primary" style="width: 276px">upload image</button>
        </div>
      </div>
    </div>
  </div>
  <script>
    // 모달 닫기 코드
    const buttonCloseModal = document.getElementById("close_modal");
    buttonCloseModal.addEventListener("click", e => {
      modal.style.display = "none";
      document.body.style.overflowY = "visible";
    });


    $('#nav_bar_add_box').click(function () {
      $('#first_modal').css({
        'display': 'flex'
      })

      $(document.body).css({
        'overflow': 'hidden'
      })
    })

    $('#close_modal').click(function () {
      $('#first_modal').css({
        'display': 'none'
      })

      $(document.body).css({
        'overflow': 'hidden'
      })
    })

    $('#second_close_modal').click(function () {
      $('#second_modal').css({
        'display': 'none'
      })

      $(document.body).css({
        'overflow': 'hidden'
      })
    })






    //<!-- jquery 부분 -->

    $('.modal_image_upload')
      .on("dragover", dragOver)
      .on("dragleave", dragOver)
      .on("drop", uploadFiles);

    function dragOver(e) {
      e.stopPropagation();
      e.preventDefault();

      if (e.type == "dragover") {
        $(e.target).css({
          "background-color": "black",
          "outline-offset": "-20px"
        });
      } else {
        $(e.target).css({
          "background-color": "white",
          "outline-offset": "-10px"
        });
      }
    }


    function uploadFiles(e) {
      e.stopPropagation();
      e.preventDefault();


      e.dataTransfer = e.originalEvent.dataTransfer;
      var files = e.dataTransfer.files;

      if (files.length > 1) {
        alert('하나만 올려라.');
        return;
      }

      if (files[0].type.match(/image.*/)) {
        $('#first_modal').css({
          'display': 'none'
        })

        $('#second_modal').css({
          'display': 'flex'
        })


        $('.image_load_space').css({
          "background-image": "url(" + window.URL.createObjectURL(files[0]) + ")",
          "outline": "none",
          "background-size": "100%",
          "background-repeat": "no-repeat",
          "background-position": "center"
        });
      } else {
        alert('이미지가 아닙니다.');
        return;
      }

    }
  </script>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous">
  </script>
</body>

</html>